<!DOCTYPE HTML>
<html>
<head>
<title>climber</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.mobile.js"></script>
<script type="text/javascript" charset="utf-8" src="js/phonegap.js"></script>

<!-- foreground camera for android background closing bug -->
<script type="text/javascript" src="js/camera.js"></script>

<!-- if android version <3.0 -->
<script type="text/javascript" charset="utf-8" src="js/todataurl.js"></script>


<!--  setup climbing image behaviour  --> 
<script type="text/javascript" charset="utf-8" src="js/climage.js"></script>
<script type="text/javascript" charset="utf-8" src="js/rest.js"></script>
<script type="text/javascript">
var currentClimage; 
$(document).bind('pageinit',function(event) { 
	currentClimage = new Climage(); 
	$('#canvas').click(function(e) { 
		currentClimage.addRoutePoint(e.clientX-$("#canvas").offset().left, e.clientY-$("#canvas").offset().top); 
	}); 
	$.getJSON('http://'+server+'/api/route/getRoutes', function(data) { 
		var items = ['<option></option>']; 
		data.map( function(route) { 
			items.push('<option value="'+route.id+'">'+route.name+'</option>'); 
		}); 
//						$('<select/>', { 
//							'id': 'routeSelector', 
//							html: items.join('') 
//						}).appendTo('#routeList'); 
		$('#routeSelector').html(items.join('')) 
	}); 
	$('#routeSelector').change(function() { 
		getRoute($('#routeSelector option:selected').val()) 
	});
}); 
</script>


</head>
<body>

<div data-role="page">

	<select id="routeSelector"></select>
	<input type="submit" onclick="location.reload()" value="reload"/>

	<canvas width="300" height="200" id="canvas"></canvas>
	<input type="text" id="routeName"/>
	<input type="submit" onclick="postClimage()" value="send"/>
	<input type="submit" onclick="currentClimage.takePicture()" value="picture"/>
	<div id="output"></div>

</div><!-- /page -->
</body>
</html>
